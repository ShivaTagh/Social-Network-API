module.exports = (function() {
    'use strict';

    const utils = require('./lib/util');
    const config = require('./config/engine.json');
    const Storage = require('./lib/Storage');

    return {
        connect: (path, options) => {
            // Initialize the storage with config and start the interface
            utils.assign(config, options);
            let storage = Storage.create(config);
            let accessor = storage.start();
            return accessor.use(path || options.connect);
        },

        // Custom services to attach
        Service: require('./lib/Service'),

        // Basic type checking for apps
        Types: require('./lib/Type'),

        // Custom transform methods
        Transform: require('./lib/Transform'),

        // Custom database adapters
        Adapter: require('./lib/Adapter'),

        // Simple caching mechanism
        Cache: require('./lib/Cache')
    };

})();
